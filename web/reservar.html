<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/Html.html to edit this template
-->
<html>
    <head>
        <title>Reservaciones</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet" type="text/css">

    </head>
    <script>
        // Datos de disponibilidad de las camas
        var disponibilidadCamas = {
            habitacion1: {
                cama1: true,
                cama2: true
            },
            habitacion2: {
                cama1: true,
                cama2: true
            }
        };

        function mostrarSolicitudDatos() {
            var reservaBtns = document.querySelector('.vertical-buttons');
            reservaBtns.style.display = 'none';
            document.getElementById('solicitudDatos').style.display = 'block';
        }

        function reservar() {
            var entrada = document.getElementById('fechaEntrada').value;
            var horaEntrada = document.getElementById('horaEntrada').value;
            var salida = document.getElementById('fechaSalida').value;
            var horaSalida = document.getElementById('horaSalida').value;
            var nombreReservacion = document.getElementById('nombreReservacion').value;
            var habitacion = document.getElementById('habitacion').value;
            var cama = document.getElementById('cama').value;

            // Verificar disponibilidad de la cama seleccionada
            if (!disponibilidadCamas[habitacion][cama]) {
                alert('La cama seleccionada no está disponible durante ese período de tiempo.');
                return;
            }

            var fechaReserva = new Date().toLocaleString();

            localStorage.setItem('entrada', entrada);
            localStorage.setItem('horaEntrada', horaEntrada);
            localStorage.setItem('salida', salida);
            localStorage.setItem('horaSalida', horaSalida);
            localStorage.setItem('nombreReservacion', nombreReservacion);
            localStorage.setItem('fechaReserva', fechaReserva);
            localStorage.setItem('habitacion', habitacion);
            localStorage.setItem('cama', cama);

            // Marcar cama como no disponible
            disponibilidadCamas[habitacion][cama] = false;

            document.getElementById('solicitudDatos').style.display = 'none';
            document.getElementById('reservaMsg').style.display = 'block';
            document.getElementById('nuevaReservacionBtn').style.display = 'block';
        }

        function mostrarReservacionesActivas() {
            var entrada = localStorage.getItem('entrada');
            var horaEntrada = localStorage.getItem('horaEntrada');
            var salida = localStorage.getItem('salida');
            var horaSalida = localStorage.getItem('horaSalida');
            var nombreReservacion = localStorage.getItem('nombreReservacion');
            var fechaReserva = localStorage.getItem('fechaReserva');
            var habitacion = localStorage.getItem('habitacion');
            var cama = localStorage.getItem('cama');
            var mensaje = 'Reservaciones activas:\n\n';

            if (entrada && horaEntrada && salida && horaSalida && nombreReservacion && fechaReserva && habitacion && cama) {
                mensaje += 'Entrada: ' + entrada + ' ' + horaEntrada + '\n';
                mensaje += 'Salida: ' + salida + ' ' + horaSalida + '\n';
                mensaje += 'Nombre de la reservación: ' + nombreReservacion + '\n';
                mensaje += 'Fecha de reserva: ' + fechaReserva + '\n';
                mensaje += 'Habitación: ' + habitacion + '\n';
                mensaje += 'Cama: ' + cama;
            } else {
                mensaje += 'No hay reservaciones activas.';
            }

            alert(mensaje);
        }

        function cargarHoras() {
            var selectHoraEntrada = document.getElementById('horaEntrada');
            var selectHoraSalida = document.getElementById('horaSalida');

            for (var hora = 0; hora < 24; hora++) {
                for (var minuto = 0; minuto < 60; minuto += 30) {
                    var horaTexto = pad(hora) + ':' + pad(minuto);
                    var opcionEntrada = new Option(horaTexto, horaTexto);
                    var opcionSalida = new Option(horaTexto, horaTexto);
                    selectHoraEntrada.add(opcionEntrada);
                    selectHoraSalida.add(opcionSalida);
                }
            }
        }

        function pad(valor) {
            return ('0' + valor).slice(-2);
        }

        function nuevaReservacion() {
            document.getElementById('solicitudDatos').style.display = 'block';
            document.getElementById('reservaMsg').style.display = 'none';
            document.getElementById('nuevaReservacionBtn').style.display = 'none';
            limpiarDatosReserva();
        }

        function limpiarDatosReserva() {
            document.getElementById('fechaEntrada').value = '';
            document.getElementById('horaEntrada').selectedIndex = 0;
            document.getElementById('fechaSalida').value = '';
            document.getElementById('horaSalida').selectedIndex = 0;
            document.getElementById('nombreReservacion').value = '';
            document.getElementById('habitacion').selectedIndex = 0;
            document.getElementById('cama').selectedIndex = 0;
        }
    </script>
    <body onload="cargarHoras();">
        <div class="container mt-4">
        <div id="solicitudDatos">
            <h2>Ingrese los datos de la reserva</h2>
            <form>
                <div class="form-group">
                    <label for="fechaEntrada">Fecha de entrada:</label>
                    <input type="date" class="form-control" id="fechaEntrada">
                    <label for="horaEntrada">Hora de entrada:</label>
                    <select class="form-control" id="horaEntrada"></select>
                </div>
                <div class="form-group">
                    <label for="fechaSalida">Fecha de salida:</label>
                    <input type="date" class="form-control" id="fechaSalida">
                    <label for="horaSalida">Hora de salida:</label>
                    <select class="form-control" id="horaSalida"></select>
                </div>
                <div class="form-group">
                    <label for="nombreReservacion">Nombre de la persona que realizará la reservación:</label>
                    <input type="text" class="form-control" id="nombreReservacion">
                </div>
                <div class="form-group">
                    <label for="habitacion">Habitación:</label>
                    <select class="form-control" id="habitacion">
                        <option value="habitacion1">Habitación 1</option>
                        <option value="habitacion2">Habitación 2</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="cama">Cama:</label>
                    <select class="form-control" id="cama">
                        <option value="cama1">Cama 1</option>
                        <option value="cama2">Cama 2</option>
                    </select>
                </div>
                <button type="button" class="btn btn-primary" onclick="reservar()">Reservar</button>
            </form>
        </div>
        <div id="reservaMsg" class="reserva-msg">
            <h2>Reservación realizada correctamente.</h2>
            <button type="button" class="btn btn-primary" onclick="nuevaReservacion();" id="nuevaReservacionBtn">Nueva Reservación</button>
        </div>
    </div>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" type="text/javascript"></script>

    </body>
</html>
