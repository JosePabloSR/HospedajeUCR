<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/Html.html to edit this template
-->
<html>
    <head>
        <title>TODO supply a title</title> <!-- Title of the page -->
        <meta charset="UTF-8"> <!-- Character encoding -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Viewport settings for mobile responsiveness -->
    <script>
        // Bed availability data
        var bedAvailability = {
            room1: {
                bed1: true,
                bed2: true
            },
            room2: {
                bed1: true,
                bed2: true
            }
        };

        // Function to show the data entry form
        function showDataEntryForm() {
            var reservationBtns = document.querySelector('.vertical-buttons');
            reservationBtns.style.display = 'none';
            document.getElementById('dataEntryForm').style.display = 'block';
        }

        function makeReservation() {
            var arrivalDate = document.getElementById('arrivalDate').value;
            var arrivalTime = document.getElementById('arrivalTime').value;
            var departureDate = document.getElementById('departureDate').value;
            var departureTime = document.getElementById('departureTime').value;
            var reservationName = document.getElementById('reservationName').value;
            var room = document.getElementById('room').value;
            var bed = document.getElementById('bed').value;

            // Check bed availability
            if (!bedAvailability[room][bed]) {
                alert('The selected bed is not available during that time period.');
                return;
            }

            var reservationDate = new Date().toLocaleString();

            localStorage.setItem('arrivalDate', arrivalDate);
            localStorage.setItem('arrivalTime', arrivalTime);
            localStorage.setItem('departureDate', departureDate);
            localStorage.setItem('departureTime', departureTime);
            localStorage.setItem('reservationName', reservationName);
            localStorage.setItem('reservationDate', reservationDate);
            localStorage.setItem('room', room);
            localStorage.setItem('bed', bed);

            // Mark bed as unavailable
            bedAvailability[room][bed] = false;

            document.getElementById('dataEntryForm').style.display = 'none';
            document.getElementById('reservationMsg').style.display = 'block';
            document.getElementById('newReservationBtn').style.display = 'block';
        }

        function showActiveReservations() {
            var arrivalDate = localStorage.getItem('arrivalDate');
            var arrivalTime = localStorage.getItem('arrivalTime');
            var departureDate = localStorage.getItem('departureDate');
            var departureTime = localStorage.getItem('departureTime');
            var reservationName = localStorage.getItem('reservationName');
            var reservationDate = localStorage.getItem('reservationDate');
            var room = localStorage.getItem('room');
            var bed = localStorage.getItem('bed');
            var message = 'Active Reservations:\n\n';

            if (arrivalDate && arrivalTime && departureDate && departureTime && reservationName && reservationDate && room && bed) {
                message += 'Arrival: ' + arrivalDate + ' ' + arrivalTime + '\n';
                message += 'Departure: ' + departureDate + ' ' + departureTime + '\n';
                message += 'Reservation Name: ' + reservationName + '\n';
                message += 'Reservation Date: ' + reservationDate + '\n';
                message += 'Room: ' + room + '\n';
                message += 'Bed: ' + bed;
            } else {
                message += 'No active reservations.';
            }

            alert(message);
        }

        function loadTimes() {
            var selectArrivalTime = document.getElementById('arrivalTime');
            var selectDepartureTime = document.getElementById('departureTime');

            for (var hour = 0; hour < 24; hour++) {
                for (var minute = 0; minute < 60; minute += 30) {
                    var timeText = pad(hour) + ':' + pad(minute);
                    var arrivalOption = new Option(timeText, timeText);
                    var departureOption = new Option(timeText, timeText);
                    selectArrivalTime.add(arrivalOption);
                    selectDepartureTime.add(departureOption);
                }
            }
        }

        function pad(value) {
            return ('0' + value).slice(-2);
        }

        function newReservation() {
            document.getElementById('dataEntryForm').style.display = 'block';
            document.getElementById('reservationMsg').style.display = 'none';
            document.getElementById('newReservationBtn').style.display = 'none';
            clearReservationData();
        }

        function clearReservationData() {
            document.getElementById('arrivalDate').value = '';
            document.getElementById('arrivalTime').selectedIndex = 0;
            document.getElementById('departureDate').value = '';
            document.getElementById('departureTime').selectedIndex = 0;
            document.getElementById('reservationName').value = '';
            document.getElementById('room').selectedIndex = 0;
            document.getElementById('bed').selectedIndex = 0;
        }
    </script>
    </head>

    <body onload="showActiveReservations();">
        <div>TODO write content</div>
    </body>
</html>
